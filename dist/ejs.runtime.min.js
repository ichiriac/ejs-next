!function(o,e){"use strict";var c=function(e){e||(e={}),this.options={strict:e.strict||!1,localsName:e.localsName||"locals",root:e.root||"/"}};c.prototype.compile=function(e,n){var t=transpile(new lexer,e,this.options,n||"eval");try{return new Function("ejs,"+this.options.localsName,t).bind(null,this)}catch(e){var r=e.lineNumber?e.lineNumber-6:1,o=new SyntaxError(e.message,n,r);throw o.stack=e.message+"\n    at "+n+":"+r+"\n"+o.stack.split(/\n/g).slice(4).join("\n"),o}},c.compile=function(e,n){return new c(n).compile(e)},c.prototype.render=function(e,n){return this.compile(e)(n)},c.render=function(e,n,t){return new c(t).render(e,n)},c.prototype.include=function(e,n,t,r){return this.renderFile(this.resolveInclude(t,n),Object.assign({},e,r))},c.prototype.resolveInclude=function(e,n,t){return n||(n=this.options.root,t=!0),c.resolveInclude(e,n,t)},c.resolveInclude=function(e,n,t){return n&&(t||(n=path.dirname(n)),e=path.resolve(n,e)),path.extname(e)||(e+=".ejs"),e},c.prototype.renderFile=function(o,i){var s=this;return new Promise(function(t,r){o=c.resolveInclude(o,s.options.root,!0),fs.readFile(o,function(e,n){if(e)return r(e);try{s.compile(n.toString(),o)(i).then(t).catch(r)}catch(e){return r(e)}})})},c.__express=c.renderFile=function(e,n,t){return new c(t).renderFile(e,n)},"undefined"!=typeof window?window.ejs=c:"undefined"!=typeof global&&(global.ejs=c),e&&(e.ejs=c),"function"==typeof define&&define.amd&&define("ejs",c),o&&o.fn&&(o.fn.extend({ejs:function(n,e){var t=o.fn.ejs.options;e&&(t=o.extend(!0,t,e));var r=new r(t);return this.each(function(){var e=o(this).html();r.compile(e)(n).then(function(e){o(this).html(e)}.bind(this)).catch(function(e){o(this).html('<pre class="ejs-error">'+e.toString()+"</pre>")})})}}),o.fn.ejs.options={})}(jQuery,window);