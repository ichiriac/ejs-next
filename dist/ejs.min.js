!function(i,t){"use strict";var u=function(){this.open_tag="<%",this.close_tag="%>",this.char_comment="#",this.char_output="=",this.char_html="-",this.char_strip="_"};u.tokens={T_EOF:0,T_INLINE:1,T_OPEN:2,T_CLOSE:3,T_OPT_COMMENT:4,T_OPT_CLEAN_OUTPUT:5,T_OPT_OUTPUT:6,T_OPT_WS_STRIP:7,T_SOURCE:8},u.states={S_INLINE:0,S_TAG:1,S_SOURCE:2},u.prototype.input=function(t){this.source=t,this.offset=-1,this.prev_offset=this.offset,this.lastOffset=t.length-1,this.lookupOffset=t.length-2,this.state=u.states.S_INLINE},u.prototype.token=function(t){return[t,this.prev_offset>this.lastOffset?null:this.source.substring(this.prev_offset,this.offset+1),this.prev_offset,this.offset+1]},u.prototype.next=function(){for(this.prev_offset=this.offset+1;++this.offset<this.lastOffset;)if(this.state===u.states.S_INLINE){if(this.offset=this.source.indexOf(this.open_tag,this.offset),-1!==this.offset)return this.state=u.states.S_TAG,this.offset--,this.token(u.tokens.T_INLINE);this.offset=this.lastOffset}else if(this.state===u.states.S_TAG){var t=this.source[this.offset];if(t!==this.open_tag[0])return this.state=u.states.S_INLINE,t===this.char_strip?(this.offset+=this.close_tag.length,this.token(u.tokens.T_OPT_WS_STRIP)):(this.offset+=this.close_tag.length-1,this.token(u.tokens.T_CLOSE));switch(this.state=u.states.S_SOURCE,this.offset+=this.open_tag.length,t=this.source[this.offset]){case this.char_comment:return this.token(u.tokens.T_OPT_COMMENT);case this.char_output:return this.token(u.tokens.T_OPT_CLEAN_OUTPUT);case this.char_html:return this.token(u.tokens.T_OPT_OUTPUT);case this.char_strip:return this.token(u.tokens.T_OPT_WS_STRIP);default:return this.offset--,this.token(u.tokens.T_OPEN)}}else{if(this.offset=this.source.indexOf(this.close_tag,this.offset),-1!==this.offset)return this.state=u.states.S_TAG,this.source[this.offset-1]===this.char_strip?this.offset-=2:this.offset--,this.token(u.tokens.T_SOURCE);this.offset=this.lastOffset}return this.prev_offset===this.offset?this.token(u.tokens.T_EOF):this.token(u.tokens.T_INLINE)};var n=function(){this._buffer="",this._parts=[],this._levels=[]};n.prototype.ob_start=function(){return this._levels.push(this._parts.length),this},n.prototype.ob_end_clean=function(){if(!(0<this._levels.length))throw new Error("Bad output level, use ob_start before");return this._parts.splice(this._levels.pop()),this},n.prototype.ob_end_flush=function(){if(!(0<this._levels.length))throw new Error("Bad output level, use ob_start before");this._levels.pop()},n.prototype.ob_clean=function(){if(!(0<this._levels.length))throw new Error("Bad output level, use ob_start before");return this._parts.splice(this._levels[this._levels.length-1]),this},n.prototype.ob_get_contents=function(){if(0<this._levels.length)return Promise.all(this._parts.slice(this._levels[this._levels.length-1])).then(function(t){return t.join("")});throw new Error("Bad output level, use ob_start before")},n.prototype.ob_get_clean=function(){var t=this.ob_get_contents();return this.ob_end_clean(),t},n.prototype.ob_get_flush=function(){var t=this.ob_get_contents();return this._levels.pop(),t},n.prototype.ob_get_level=function(){return this._levels.length},n.prototype.echo=function(t){return"function"==typeof t.then?(this._parts.push(this._buffer),this._parts.push(t),this._buffer=""):this._buffer+=t,this};var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};n.prototype.safeEcho=function(t){"function"==typeof t.then&&this.echo(Promise.resolve(t).then(function(t){return null===t?null:t.replace(/[&<>'"]/g,function(t){return e[t]})})),"string"==typeof t?this.echo(t.replace(/[&<>'"]/g,function(t){return e[t]})):this.echo(new String(t).replace(/[&<>'"]/g,function(t){return e[t]}))},n.prototype.toString=function(){return 0===this._parts.length?this._buffer:(0<this._buffer.length&&(this._parts.push(this._buffer),this._buffer=""),this._parts.join(""))},n.prototype.resolveOutput=function(){return 0===this._parts.length?Promise.resolve(this._buffer):(0<this._buffer.length&&(this._parts.push(this._buffer),this._buffer=""),Promise.all(this._parts).then(function(t){return this._buffer=t.join(""),this._parts=[],this._buffer}.bind(this)))};var h=function(t,e){this._state=[{Math:Math,Date:Date}],this._engine=e,t&&this.push(t),this._output=new n(this)};for(var s in h.prototype.push=function(t){for(var e in this._state.push(t),t)this.hasOwnProperty(e)||Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:this.get.bind(this,e),set:this.set.bind(this,e)});return this},h.prototype.pop=function(){return this._state.pop(),this},h.prototype.include=function(t,e){return"function"==typeof e&&(this.ob_start(),e(),e={contents:this.ob_get_clean()}),this.push(e),this.ob_start(),this.engine.renderFile(t,this),this.pop(),this.ob_get_clean()},n.prototype)!function(t){h.prototype[t]=function(){return this._output[t].apply(this._output,arguments)}}(s);h.prototype.set=function(t,e){return this._state[this._state.length-1][t]=e,this},h.prototype.get=function(t){if("_"!==t[0]&&h.prototype.hasOwnProperty(t))return this[t].bind(this);for(var e=this._state.length-1;-1<e;e--)if(this._state[e].hasOwnProperty(t))return this._state[e][t];return null};var o={get:function(t,e){return t.get(e)},set:function(t,e,s){return t.set(e,s)},has:function(t,e){return"_"!==e[0]&&"locals"!==e}};h.create=function(t,e){if(t instanceof Proxy||t instanceof h)return t;if(e.options.strict){var s=new n(e);return Object.assign(s,t)}return"function"==typeof Proxy?new Proxy(new h(t,e),o):new h(t,e)};var r=function(t){t||(t={}),this.options={strict:t.strict||!1,localsName:t.localsName||"locals"}};r.prototype.compile=function(t,e){e||(e="eval");var s=function(t,e,s){t.input(e);var n,i,o,r="";for(o=s.strict?(r+='"use strict";\n',i=s.localsName+".safeEcho(",s.localsName+".echo("):(r+="with("+s.localsName+") {\n",i="\tsafeEcho(","\techo("),n=t.next();;)if(n[0]===u.tokens.T_INLINE){var h=n[1];(n=t.next())[0]===u.tokens.T_OPT_WS_STRIP&&(h=h.replace(/[ \t]+$/,"")),0<h.length&&(r+=o+"`"+h.replace("`","\\`")+"`);\n")}else{if(n[0]===u.tokens.T_EOF)break;if(n[0]===u.tokens.T_OPT_COMMENT){(n=t.next())[0]===u.tokens.T_SOURCE&&(r+="\t/* "+n[1].replace(/\*\//,"")+"*/\n",n=t.next());var f=n[0]===u.tokens.T_OPT_WS_STRIP;n=t.next(),f&&n[0]===u.tokens.T_INLINE&&(n[1]=n[1].replace(/^[ \t]*\n?/,""))}else if(n[0]===u.tokens.T_OPEN||n[0]===u.tokens.T_OPT_WS_STRIP)(n=t.next())[0]===u.tokens.T_SOURCE&&(r+="\t"+n[1]+";\n",n=t.next()),f=n[0]===u.tokens.T_OPT_WS_STRIP,n=t.next(),f&&n[0]===u.tokens.T_INLINE&&(n[1]=n[1].replace(/^[ \t]*\n?/,""));else{var _=n[0]===u.tokens.T_OPT_CLEAN_OUTPUT;(n=t.next())[0]===u.tokens.T_SOURCE&&(r+=_?i+n[1]+");\n":o+n[1]+");\n",n=t.next()),f=n[0]===u.tokens.T_OPT_WS_STRIP,n=t.next(),f&&n[0]===u.tokens.T_INLINE&&(n[1]=n[1].replace(/^[ \t]*\n?/,""))}}return s.strict||(r+="}\n"),r+="return "+s.localsName+".resolveOutput();"}(new u,t,this.options);try{return new Function(this.options.localsName,s)}catch(t){var n=t.lineNumber?t.lineNumber-6:1,i=new SyntaxError(t.message,e,n);throw i.stack=t.message+"\n    at "+e+":"+n+"\n"+i.stack.split(/\n/g).slice(4).join("\n"),i}},r.compile=function(t,e){return new r(e).compile(t)},r.prototype.render=function(t,e){return this.compile(t)(h.create(e||{},this))},r.render=function(t,e,s){return new r(s).render(t,e)},r.prototype.renderFile=function(i,o){var r=this;return new Promise(function(s,n){fs.readFile(i,function(t,e){if(t)return n(t);try{r.compile(e,i)(h.create(o||{},this)).then(s).catch(n)}catch(t){return n(t)}})})},r.__express=r.renderFile=function(t,e,s){return new r(s).renderFile(t,e)},t&&(t.ejs=r),"function"==typeof define&&define.amd&&define("ejs",r),i&&i.fn&&(i.fn.extend({ejs:function(e,t){var s=i.fn.ejs.options;t&&(s=i.extend(!0,s,t));var n=new n(s);return this.each(function(){var t=i(this).html();n.compile(t)(e).then(function(t){i(this).html(t)}.bind(this)).catch(function(t){i(this).html('<pre class="ejs-error">'+t.toString()+"</pre>")})})}}),i.fn.ejs.options={})}(jQuery,window);