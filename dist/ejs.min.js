!function(o,t){"use strict";var u=function(){this.open_tag="<%",this.close_tag="%>",this.char_comment="#",this.char_output="=",this.char_html="-",this.char_strip="_",this.char_buffering="{@",this.char_ignore="%"};u.tokens={T_EOF:0,T_INLINE:1,T_OPEN:2,T_CLOSE:3,T_OPT_COMMENT:4,T_OPT_CLEAN_OUTPUT:5,T_OPT_OUTPUT:6,T_OPT_WS_STRIP:7,T_OPT_NL_STRIP:8,T_SOURCE:9},u.states={S_INLINE:0,S_TAG:1,S_SOURCE:2},u.prototype.input=function(t){this.source=t,this.offset=-1,this.prev_offset=this.offset,this.lastOffset=t.length-1,this.lookupOffset=t.length-2,this.state=u.states.S_INLINE},u.prototype.token=function(t){return[t,this.prev_offset>this.lastOffset?null:this.source.substring(this.prev_offset,this.offset+1),this.prev_offset,this.offset+1]},u.prototype.next=function(){for(this.prev_offset=this.offset+1;++this.offset<this.lastOffset;)if(this.state===u.states.S_INLINE){if(this.offset=this.source.indexOf(this.open_tag,this.offset),-1!==this.offset)return this.state=u.states.S_TAG,this.offset--,this.token(u.tokens.T_INLINE);this.offset=this.lastOffset}else if(this.state===u.states.S_TAG){var t=this.source[this.offset];if(t!==this.open_tag[0])return this.state=u.states.S_INLINE,t===this.char_strip?(this.offset+=this.close_tag.length,this.token(u.tokens.T_OPT_WS_STRIP)):t===this.char_html?(this.offset+=this.close_tag.length,this.token(u.tokens.T_OPT_NL_STRIP)):(this.offset+=this.close_tag.length-1,this.token(u.tokens.T_CLOSE));switch(this.state=u.states.S_SOURCE,this.offset+=this.open_tag.length,t=this.source[this.offset]){case this.char_comment:return this.token(u.tokens.T_OPT_COMMENT);case this.char_output:return this.token(u.tokens.T_OPT_CLEAN_OUTPUT);case this.char_html:return this.token(u.tokens.T_OPT_OUTPUT);case this.char_strip:return this.token(u.tokens.T_OPT_WS_STRIP);default:return this.offset--,this.token(u.tokens.T_OPEN)}}else{if(this.offset=this.source.indexOf(this.close_tag,this.offset),-1!==this.offset)return this.state=u.states.S_TAG,this.source[this.offset-1]===this.char_strip||this.source[this.offset-1]===this.char_html?this.offset-=2:this.offset--,this.token(u.tokens.T_SOURCE);this.offset=this.lastOffset}return this.prev_offset===this.offset?this.token(u.tokens.T_EOF):this.token(u.tokens.T_INLINE)};var i=function(t,e){this._buffer="",this._parts=[],this._filename=e,this._engine=t||new h};i.prototype.push=function(t){var e=new i(this._engine,this._filename);for(var s in Object.assign(e,t),this)"_"!==s[0]&&this.hasOwnProperty(s)&&void 0===typeof t[s]&&(e[s]=this[s]);return e},i.prototype.echo=function(t){return"function"==typeof t.then?(0<this._buffer.length&&this._parts.push(this._buffer),this._parts.push(t),this._buffer=""):this._buffer+=t,this};var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"};i.prototype.safeEcho=function(t){if("function"==typeof t.then)return this.echo(Promise.resolve(t).then(function(t){return null===t?null:t.replace(/[&<>'"]/g,function(t){return e[t]})}));"string"==typeof t?this.echo(t.replace(/[&<>'"]/g,function(t){return e[t]})):this.echo(new String(t).replace(/[&<>'"]/g,function(t){return e[t]}))},i.prototype.include=function(t,e){return"/"!==t[0]&&(t=path.relative(this._engine.options.root,this._engine.resolveInclude(t,this._filename,!1))),this._engine.renderFile(t,this.push(e))},i.prototype.block=function(t,e){if(this.blocks||(this.blocks={}),this.blocks[t]||(this.blocks[t]=[]),e&&"function"==typeof e){var s=e({});return this.blocks[t].push(s),s}return this.blocks[t]},i.prototype.resolveOutput=function(){return 0===this._parts.length?Promise.resolve(this._buffer):(0<this._buffer.length&&(this._parts.push(this._buffer),this._buffer=""),Promise.all(this._parts).then(function(t){return this._buffer=t.join(""),this._parts=[],this._buffer}.bind(this)))};var s={locals:!0,Math:!0,Date:!0,global:!0,window:!0,Function:!0};for(var n in global||window)s[n]=!0;var r={get:function(t,e){return e===Symbol.unscopables?s:(void 0===t[e]&&(t[e]=new Proxy({},r)),t[e])},set:function(t,e,s){t[e]=s},has:function(t,e){return!s.hasOwnProperty(e)}};context=function(t,e,s){if(t instanceof Proxy)return t;var n;if(n=t instanceof i?t:Object.assign(new i(e,s),t),e.options.strict||"function"!=typeof Proxy)return n;for(var o in n)"function"==typeof n[o]&&(n[o]=n[o].bind(n));return new Proxy(n,r)};var h=function(t){t||(t={}),this.options={strict:t.strict||!1,localsName:t.localsName||"locals",root:t.root||"/"}};h.prototype.compile=function(t,e){e||(e="eval");var s=function(t,e,s,n){t.input(e);var o,i,r,h="";for(r=s.strict?(h+='"use strict";\n',i=s.localsName+".safeEcho(",s.localsName+".echo("):(i="\tsafeEcho(","\techo("),h+='if (!ejs || typeof ejs.context !== "function") {\n',h+="\t"+s.localsName+" = ejs;\n",h+='\tif (typeof window !== "undefined") {\n',h+="\t\tejs = window.ejs;\n",h+='\t} else if (typeof global !== "undefined") {\n',h+="\t\tejs = global.ejs;\n",h+="\t} else {\n",h+='\t\treturn Promise.reject(new Error("EJS module is not loaded"));\n',h+="\t}\n",h+="}\n",h+=s.localsName+" = ejs.context("+s.localsName+", "+JSON.stringify(s)+',"'+n+'");\n',s.strict||(h+="with("+s.localsName+") {\n"),o=t.next();;)if(o[0]===u.tokens.T_INLINE){var f=o[1];(o=t.next())[0]===u.tokens.T_OPT_WS_STRIP&&(f=f.replace(/[ \t]+$/,"")),0<f.length&&(h+=r+"`"+f.replace("`","\\`")+"`);\n")}else{if(o[0]===u.tokens.T_EOF)break;if(o[0]===u.tokens.T_OPT_COMMENT)(o=t.next())[0]===u.tokens.T_SOURCE&&(h+="\t/* "+o[1].replace(/\*\//,"")+"*/\n",o=t.next());else if(o[0]===u.tokens.T_OPEN||o[0]===u.tokens.T_OPT_WS_STRIP)(o=t.next())[0]===u.tokens.T_SOURCE&&(h+="\t"+o[1]+";\n",o=t.next());else{var c=o[0]===u.tokens.T_OPT_CLEAN_OUTPUT;(o=t.next())[0]===u.tokens.T_SOURCE&&(h+=c?i+o[1]+");\n":r+o[1]+");\n",o=t.next())}var a=o[0];(o=t.next())[0]===u.tokens.T_INLINE&&(a===u.tokens.T_OPT_WS_STRIP?o[1]=o[1].replace(/^[ \t]*\n?/,""):a===u.tokens.T_OPT_NL_STRIP&&(o[1]=o[1].replace(/^[ \t]*\n?/,"")))}return s.strict||(h+="}\n"),h+="return "+s.localsName+".resolveOutput();"}(new u,t,this.options,e);try{return new Function("ejs,"+this.options.localsName,s).bind(null,h)}catch(t){var n=t.lineNumber?t.lineNumber-6:1,o=new SyntaxError(t.message,e,n);throw o.stack=t.message+"\n    at "+e+":"+n+"\n"+o.stack.split(/\n/g).slice(4).join("\n"),o}},h.compile=function(t,e){return new h(e).compile(t)},h.prototype.render=function(t,e){return this.compile(t)(context(e||{},this))},h.render=function(t,e,s){return new h(s).render(t,e)},h.prototype.resolveInclude=function(t,e,s){return e||(e=this.options.root,s=!0),h.resolveInclude(t,e,s)},h.resolveInclude=function(t,e,s){return e&&(s||(e=path.dirname(e)),t=path.resolve(e,t)),path.extname(t)||(t+=".ejs"),t},h.prototype.renderFile=function(o,i){var r=this;return new Promise(function(s,n){o=h.resolveInclude(o,r.options.root,!0),fs.readFile(o,function(t,e){if(t)return n(t);try{r.compile(e.toString(),o)(context(i||{},r,o)).then(s).catch(n)}catch(t){return n(t)}})})},h.context=function(t,e,s){return t instanceof i?t:context(t,new h(e),s)},h.renderFile=function(t,e,s){return new h(s).renderFile(t,e)},h.__express=h.renderFile,"undefined"!=typeof window?window.ejs=h:"undefined"!=typeof global&&(global.ejs=h),t&&(t.ejs=h),"function"==typeof define&&define.amd&&define("ejs",h),o&&o.fn&&(o.fn.extend({ejs:function(e,t){var s=o.fn.ejs.options;t&&(s=o.extend(!0,s,t));var n=new n(s);return this.each(function(){var t=o(this).html();n.compile(t)(e).then(function(t){o(this).html(t)}.bind(this)).catch(function(t){o(this).html('<pre class="ejs-error">'+t.toString()+"</pre>")})})}}),o.fn.ejs.options={})}(jQuery,window);