!function(o,t){"use strict";var T=function(){this.open_tag="<%",this.close_tag="%>"};T.tokens={T_EOF:0,T_INLINE:1,T_OPEN:2,T_CLOSE:3,T_OPT_COMMENT:4,T_OPT_CLEAN_OUTPUT:5,T_OPT_OUTPUT:6,T_OPT_WS_STRIP:7,T_OPT_NL_STRIP:8,T_SOURCE:9,T_OPEN_CAPTURE:10,T_CLOSE_CAPTURE:11},T.states={S_INLINE:0,S_TAG:1,S_SOURCE:2},T.prototype.input=function(t){this.source=t,this.offset=-1,this.prev_offset=this.offset,this.lastOffset=t.length-1,this.lookupOffset=t.length-2,this.state=T.states.S_INLINE,this.current=null},T.prototype.token=function(t){var e=this.prev_offset>this.lastOffset?null:this.source.substring(this.prev_offset,this.offset+1);return this.current=[t,e,this.prev_offset,this.offset+1],this.current},T.prototype.next=function(){var t;for(this.prev_offset=this.offset+1;++this.offset<this.lastOffset;){if(this.state!==T.states.S_INLINE){if(this.state===T.states.S_TAG)return t=this.source[this.offset],this.state=T.states.S_SOURCE,this.offset+=this.open_tag.length,"="==(t=this.source[this.offset])?this.token(T.tokens.T_OPT_CLEAN_OUTPUT):"-"==t?this.token(T.tokens.T_OPT_OUTPUT):"_"==t?this.token(T.tokens.T_OPT_WS_STRIP):"#"==t?this.token(T.tokens.T_OPT_COMMENT):(this.offset--,this.token(T.tokens.T_OPEN));do{if("'"==(t=this.source[this.offset])||'"'==t||"`"==t)for(;++this.offset<this.lastOffset;){var e=this.source[this.offset];if("\\"!=e){if(e==t)break}else this.offset++}if("/"==t&&"*"==this.source[this.offset+1])for(;++this.offset<this.lastOffset;)if("*"==(t=this.source[this.offset])&&"/"==this.source[this.offset+1]){++this.offset;break}if("{"==t&&"@"==this.source[this.offset+1]){if(this.prev_offset==this.offset)return this.offset++,this.token(T.tokens.T_OPEN_CAPTURE);this.offset--;break}if("@"==t&&"}"==this.source[this.offset+1]){if(this.prev_offset==this.offset)return this.offset++,this.token(T.tokens.T_CLOSE_CAPTURE);this.offset--;break}if(t==this.close_tag[0]&&this.source.substring(this.offset,this.offset+this.close_tag.length)==this.close_tag){var s="_"===this.source[this.offset-1],n="-"===this.source[this.offset-1];if((s||n)&&this.offset--,this.prev_offset==this.offset)return this.state=T.states.S_INLINE,this.offset+=this.close_tag.length,s?this.token(T.tokens.T_OPT_WS_STRIP):n?this.token(T.tokens.T_OPT_NL_STRIP):(this.offset--,this.token(T.tokens.T_CLOSE));this.offset--;break}}while(++this.offset<this.lastOffset);return this.token(T.tokens.T_SOURCE)}if(this.offset=this.source.indexOf(this.open_tag,this.offset),-1!==this.offset){if("%"===this.source[this.offset+2])continue;return this.state=T.states.S_TAG,this.offset--,this.token(T.tokens.T_INLINE)}this.offset=this.lastOffset}return this.prev_offset===this.offset?this.token(T.tokens.T_EOF):this.token(T.tokens.T_INLINE)};var u=function(t){for(var e="",s=t.next();s[0]!=T.tokens.T_EOF&&s[0]!=T.tokens.T_CLOSE&&s[0]!=T.tokens.T_OPT_WS_STRIP&&s[0]!=T.tokens.T_OPT_NL_STRIP;)e+=s[1],s=t.next();return e},l=function(t,e,s){var n="",o="\t_e[_$b++] = ";e.strict&&(n+='"use strict";\n'),n+="var _$e = [], _e = [], _$a = 0, _$b = 0;\n",s&&(n+='var _$f = "'+s+'";\n',n+="if (arguments.length < 2) {\n",n+="\t"+e.localsName+" = ejs;\n",n+='\tejs = (typeof global != "undefined" && global.ejs) || (typeof window != "undefined" && window.ejs);\n',n+='\tif(!ejs) return Promise.reject(new Error("EJS module is not loaded"));\n',n+="\tejs = new ejs("+JSON.stringify(e)+");\n",n+="}\n",n+=e.localsName+" = "+e.localsName+" || {};\n",n+="var include = ejs.include.bind(ejs, "+e.localsName+', "'+s+'");\n'),e.strict||(n+="with("+e.localsName+") {\n");for(var i=t.next();;)if(i[0]==T.tokens.T_INLINE){var r=i[1];(i=t.next())[0]==T.tokens.T_OPT_WS_STRIP&&(r=r.replace(/[ \t]+$/,"")),0<r.length&&(n+=o+"`"+r.replace("`","\\`")+"`;\n")}else{if(i[0]==T.tokens.T_EOF)break;if(i[0]==T.tokens.T_CLOSE_CAPTURE)break;if(i[0]==T.tokens.T_OPT_COMMENT)n+="\t/* "+u(t)+"*/\n";else{var f=i[0]==T.tokens.T_OPEN||i[0]==T.tokens.T_OPT_WS_STRIP,h=i[0]==T.tokens.T_OPT_OUTPUT,_=i[0]==T.tokens.T_OPT_CLEAN_OUTPUT,a="";for(i=t.next();i[0]!=T.tokens.T_EOF&&i[0]!=T.tokens.T_CLOSE&&i[0]!=T.tokens.T_OPT_WS_STRIP&&i[0]!=T.tokens.T_OPT_NL_STRIP&&i[0]!=T.tokens.T_CLOSE_CAPTURE;)i[0]==T.tokens.T_OPEN_CAPTURE?(a+="{",a+=l(t,e),a+="}"):a+=i[1],i=t.next();if(i[0]==T.tokens.T_CLOSE_CAPTURE){n+=a;break}f?a+=";\n":h?a=o+a+";\n":_&&(a="\t_$e[_$a++] = _$b; _e[_$b++] = "+a+";\n"),n+=a}var c=t.current[0];(i=t.next())[0]==T.tokens.T_INLINE&&(c==T.tokens.T_OPT_WS_STRIP?i[1]=i[1].replace(/^[ \t]*\n?/,""):c==T.tokens.T_OPT_NL_STRIP&&(i[1]=i[1].replace(/^[ \t]*\n?/,"")))}return e.strict||(n+="}\n"),n+="return Promise.all(_e).then(function(parts) {\n",n+="\tvar r = /[&<>'\"]/g;\n",n+="\tfor(var i = 0; i < _$e.length; i++) {\n",n+="\t\tvar offset = _$e[i];\n",n+="\t\tvar str = parts[offset];\n",n+="\t\tif (str != null) {\n",n+="\t\t\tparts[offset] = str.replace(r, function(c) {\n",n+="\t\t\t\tif (c == '&') return '&amp;';\n",n+="\t\t\t\tif (c == '<') return '&lt;';\n",n+="\t\t\t\tif (c == '>') return '&gt;';\n",n+="\t\t\t\tif (c == '\"') return '&#34;';\n",n+="\t\t\t\tif (c == \"'\") return '&#39;';\n",n+="\t\t\t\treturn c;\n",n+="\t\t\t});\n",n+="\t\t}\n",n+="\t}\n",n+="\treturn parts.join('');\n",n+="});\n",s&&(n+="//@ sourceURL="+s),n},f=function(t){t||(t={}),this.options={strict:t.strict||!1,localsName:t.localsName||"locals",root:t.root||"/"}};f.prototype.compile=function(t,e){var s,n,o,i,r=(s=new T,n=t,o=this.options,i=e||"eval",s.input(n),l(s,o,i||"eval"));try{return new Function("ejs,"+this.options.localsName,r).bind(null,this)}catch(t){var f=t.lineNumber?t.lineNumber-6:1,h=new SyntaxError(t.message,e,f);throw h.stack=t.message+"\n    at "+e+":"+f+"\n"+h.stack.split(/\n/g).slice(4).join("\n"),h}},f.compile=function(t,e){return new f(e).compile(t)},f.prototype.render=function(t,e){return this.compile(t)(e)},f.render=function(t,e,s){return new f(s).render(t,e)},f.prototype.include=function(t,e,s,n){return this.renderFile(this.resolveInclude(s,e),Object.assign({},t,n))},f.prototype.resolveInclude=function(t,e,s){return e||(e=this.options.root,s=!0),f.resolveInclude(t,e,s)},f.resolveInclude=function(t,e,s){return e&&(s||(e=path.dirname(e)),t=path.resolve(e,t)),path.extname(t)||(t+=".ejs"),t},f.prototype.renderFile=function(o,i){var r=this;return new Promise(function(s,n){o=f.resolveInclude(o,r.options.root,!0),fs.readFile(o,function(t,e){if(t)return n(t);try{r.compile(e.toString(),o)(i).then(s).catch(n)}catch(t){return n(t)}})})},f.__express=f.renderFile=function(t,e,s){return new f(s).renderFile(t,e)},"undefined"!=typeof window?window.ejs=f:"undefined"!=typeof global&&(global.ejs=f),t&&(t.ejs=f),"function"==typeof define&&define.amd&&define("ejs",f),o&&o.fn&&(o.fn.extend({ejs:function(e,t){var s=o.fn.ejs.options;t&&(s=o.extend(!0,s,t));var n=new n(s);return this.each(function(){var t=o(this).html();n.compile(t)(e).then(function(t){o(this).html(t)}.bind(this)).catch(function(t){o(this).html('<pre class="ejs-error">'+t.toString()+"</pre>")})})}}),o.fn.ejs.options={})}(jQuery,window);