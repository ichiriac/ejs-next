!function(t,e){"use strict";var s=function(t){t||(t="%"),this.open_tag="<"+t,this.close_tag=t+">",this.char_comment="#",this.char_output="=",this.char_html="-",this.char_strip="_",this.char_ignore=t};s.tokens={T_EOF:0,T_INLINE:1,T_OPEN:2,T_CLOSE:3,T_OPT_COMMENT:4,T_OPT_CLEAN_OUTPUT:5,T_OPT_OUTPUT:6,T_OPT_WS_STRIP:7,T_OPT_NL_STRIP:8,T_CLOSE_STRIP:9,T_SOURCE:10,T_TEXT:12,T_COMMENT:13},s.states={S_INLINE:0,S_TAG:1,S_SOURCE:2},s.prototype.input=function(t){this.source=t,this.offset=-1,this.prev_offset=this.offset,this.lastOffset=t.length-1,this.lookupOffset=t.length-2,this.state=s.states.S_INLINE,this.current=null},s.prototype.token=function(t){var e=this.prev_offset>this.lastOffset?null:this.source.substring(this.prev_offset,this.offset+1);return this.current=[t,e,this.prev_offset,this.offset+1],this.current},s.prototype.next=function(){var t;for(this.prev_offset=this.offset+1;++this.offset<this.lastOffset;)if(this.state===s.states.S_INLINE){if(this.offset=this.source.indexOf(this.open_tag,this.offset),-1!==this.offset){if(this.source[this.offset+2]===this.char_ignore)continue;return this.state=s.states.S_TAG,this.offset--,this.token(s.tokens.T_INLINE)}this.offset=this.lastOffset}else{if(this.state!==s.states.S_TAG){if("'"==(t=this.source[this.offset])||'"'==t||"`"==t){for(;++this.offset<this.lastOffset;){var e=this.source[this.offset];if("\\"!=e){if(e==t)break}else this.offset++}return this.token(s.tokens.T_TEXT)}if("/"==t&&"*"==this.source[this.offset+1]){for(;++this.offset<this.lastOffset;)if("*"==(t=this.source[this.offset])&&"/"==this.source[this.offset+1]){++this.offset;break}return this.token(s.tokens.T_COMMENT)}if("#"==t||"/"==t&&"/"==this.source[this.offset+1]){for(;++this.offset<this.lastOffset;){if((t=this.source[this.offset])==this.close_tag[0]&&this.source.substring(this.offset,this.offset+this.close_tag.length)==this.close_tag){this.state=s.states.S_TAG,this.source[this.offset-1]==this.char_strip||this.source[this.offset-1]==this.char_html?this.offset-=2:this.offset--;break}if("\r"==t||"\n"==t){this.offset--;break}}return this.token(s.tokens.T_COMMENT)}do{if((t=this.source[this.offset])==this.close_tag[0]&&this.source.substring(this.offset,this.offset+this.close_tag.length)==this.close_tag){this.state=s.states.S_TAG,this.source[this.offset-1]!=this.char_strip&&this.source[this.offset-1]!=this.char_html||this.offset--;break}if("'"==t||'"'==t||"`"==t)break;if("/"==t&&"*"==this.source[this.offset+1])break;if("#"==t||"/"==t&&"/"==this.source[this.offset+1])break}while(++this.offset<this.lastOffset);return this.offset--,this.token(s.tokens.T_SOURCE)}if((t=this.source[this.offset])!==this.open_tag[0])return this.state=s.states.S_INLINE,t==this.char_strip?(this.offset+=this.close_tag.length,this.token(s.tokens.T_CLOSE_STRIP)):t==this.char_html?(this.offset+=this.close_tag.length,this.token(s.tokens.T_OPT_NL_STRIP)):(this.offset+=this.close_tag.length-1,this.token(s.tokens.T_CLOSE));switch(this.state=s.states.S_SOURCE,this.offset+=this.open_tag.length,t=this.source[this.offset]){case this.char_comment:return this.state=s.states.S_INLINE,this.offset=this.source.indexOf(this.close_tag,this.offset),-1==this.offset?this.offset=this.lastOffset:this.offset+=this.close_tag.length-1,this.token(s.tokens.T_OPT_COMMENT);case this.char_output:return this.token(s.tokens.T_OPT_CLEAN_OUTPUT);case this.char_html:return this.token(s.tokens.T_OPT_OUTPUT);case this.char_strip:return this.token(s.tokens.T_OPT_WS_STRIP);default:return this.offset--,this.token(s.tokens.T_OPEN)}}return this.prev_offset===this.offset?this.token(s.tokens.T_EOF):this.token(s.tokens.T_INLINE)};const i={Math:!0,Array:!0,Object:!0,String:!0,Function:!0,Date:!0,Error:!0,TypeError:!0,SyntaxError:!0,ReferenceError:!0,RangeError:!0,EvalError:!0,URIError:!0,Number:!0,Symbol:!0,BigInt:!0,RegExp:!0,Promise:!0,Map:!0,Set:!0,WeakMap:!0,WeakSet:!0,Reflect:!0,Proxy:!0,Intl:!0,console:!0,Boolean:!0,RegExp:!0,Number:!0,parseInt:!0,parseFloat:!0,isNaN:!0,isFinite:!0,eval:!0,JSON:!0,global:!0,require:!0,window:!0,document:!0,$:!0},n=async function(){}.constructor;function o(t,e,o,r){e||(e={}),e.localsName||(e.localsName="locals");const h=function(t,e){const i=new s(e.delimiter);i.input(t);const n=[];let o=i.next(),r=null,h=null,a=!1;for(;o[0]!==s.tokens.T_EOF;){if(o[0]===s.tokens.T_SOURCE||o[0]===s.tokens.T_TEXT||o[0]===s.tokens.T_COMMENT)n.push(o[1]);else if(o[0]===s.tokens.T_OPT_COMMENT)n.push("/*"+o[1]+"*/");else{if(o[0]===s.tokens.T_INLINE){h=i.next();let t=o[1].replace("`","\\`"),e="",a="";h[0]===s.tokens.T_OPT_WS_STRIP&&(t=t.trimEnd(),a=o[1].substring(t.length)),!r||r[0]!==s.tokens.T_OPT_NL_STRIP&&r[0]!==s.tokens.T_CLOSE_STRIP||(t=t.trimStart(),e=o[1].substring(0,o[1].length-t.length-a.length)),n.push(e+";_$e.write(`"+t+"`);"+a),r=o,o=h;continue}o[0]===s.tokens.T_OPT_CLEAN_OUTPUT?(n.push(";_$e.safe_write("),a=!0):o[0]===s.tokens.T_OPT_OUTPUT?(n.push(";_$e.write("),a=!0):o[0]!==s.tokens.T_CLOSE&&o[0]!==s.tokens.T_CLOSE_STRIP&&o[0]!==s.tokens.T_OPT_NL_STRIP||a&&(n.push(");"),a=!1)}r=o,o=i.next()}if(a){if(e.strict)throw new Error("Unclosed tag at end of template");n.push(");")}return n.join("")}(t,e),a=parse(h,{module:!0,next:!0}),f={_$e:!0,layout:!1,include:!1,block:!1,echo:!1,write:!1,[e.localsName]:!0};let c="";var u=Object.assign({},astring.GENERATOR,{Identifier:function(t,s){i.hasOwnProperty(t.name)?s.write(t.name):f.hasOwnProperty(t.name)?s.write(t.name):r&&r.constructor.__fn.hasOwnProperty(t.name)?(c+="const "+t.name+" = ejs.constructor.__fn["+JSON.stringify(t.name)+"].bind(ejs, "+e.localsName+");\n",s.write(t.name),f[t.name]=!0):e.strict?s.write(e.localsName+"."+t.name):s.write("("+e.localsName+"."+t.name+" ?? '')")},EmptyStatement:function(){},VariableDeclarator:function(t,e){if("Identifier"!==t.id.type)throw new Error("Unsupported variable declarator");e.write(t.id.name),f[t.id.name]||(f[t.id.name]=1),t.init&&(e.write(" = "),this[t.init.type](t.init,e))},Property:function(t,e){t.computed?(e.write("["),this[t.key.type](t.key,e),e.write("]")):e.write(t.key.name),e.write(": "),this[t.value.type](t.value,e)},AssignmentExpression:function(t,s){if("Identifier"!==t.left.type)throw new Error("Unsupported assignment expression");s.write(e.localsName+"."+t.left.name),s.write(" "+t.operator+" "),this[t.right.type](t.right,s)},FunctionDeclaration:function(t,e){this.FunctionExpression(t,e),t.id&&(f[t.id.name]?f[t.id.name]++:f[t.id.name]=1)},FunctionExpression:function(t,e){t.async&&e.write("async "),e.write("function"),t.generator&&e.write("*"),t.id&&(e.write(" "+t.id.name),f[t.id.name]?f[t.id.name]++:f[t.id.name]=1),e.write("(");for(let s=0;s<t.params.length;s++){if(s>0&&e.write(", "),"Identifier"!==t.params[s].type)throw new Error("Unsupported function parameter");e.write(t.params[s].name),f[t.params[s].name]?f[t.params[s].name]++:f[t.params[s].name]=1}e.write(") "),this[t.body.type](t.body,e);for(let e=0;e<t.params.length;e++)f[t.params[e].name]--,0===f[t.params[e].name]&&delete f[t.params[e].name];t.id&&(f[t.id.name]--,0===f[t.id.name]&&delete f[t.id.name])},MemberExpression:function(t,e){t.computed?(this[t.object.type](t.object,e),e.write("["),this[t.property.type](t.property,e),e.write("]")):(this[t.object.type](t.object,e),e.write("."),e.write(t.property.name))}});let l=astring.generate(a,{generator:u}),p=e.strict?"\n":"";return p+="if (arguments.length < 2) {\n",p+="\t"+e.localsName+" = ejs;\n",p+='\tejs = (typeof global != "undefined" && global.ejs) || (typeof window != "undefined" && window.ejs);\n',p+='\tif(!ejs) return Promise.reject(new Error("EJS module is not loaded"));\n',p+="\tejs = new ejs("+JSON.stringify(e)+");\n",p+="} else {\n",p+="\t"+e.localsName+" = "+e.localsName+" || {};\n",p+="}\n",p+="const _$e = ejs.output();\n",p+="ejs._output = _$e;\n",p+=e.localsName+"._filename = "+JSON.stringify(o)+";\n",p+="const include = ejs.include.bind(ejs, "+e.localsName+", "+JSON.stringify(o)+");\n",p+="const block = ejs.block.bind(ejs, "+e.localsName+");\n",p+="const layout = ejs.layout.bind(ejs, "+e.localsName+", "+JSON.stringify(o)+", _$e);",p+=e.localsName+"._include = include;\n",p+=e.localsName+"._output = _$e;\n",p+="const echo = _$e.safe_write.bind(_$e);\n",p+="const write = _$e.write.bind(_$e);\n",new n("ejs",e.localsName,p+c+l+"\nreturn _$e.toString();")}var r=function(){this.hook=null,this.output=[],this.offset=-1,this.sanitize=[],this.isPromise=!0},h=/[&<>'\"]/g;r.sanitize=function(t){return"string"!=typeof t&&(t=t.toString()),t.replace(h,function(t){return"&"==t?"&amp;":"<"==t?"&lt;":">"==t?"&gt;":'"'==t?"&#34;":"'"==t?"&#39;":t})},r.prototype.buffer=function(t){var e=this.hook,s=this.output,i=this.offset,n=this.sanitize,o=this.isPromise;return this.hook=null,this.output=[],this.offset=-1,this.sanitize=[],this.isPromise=!0,function(){var t=this.toString();return this.hook=e,this.output=s,this.offset=i,this.sanitize=n,this.isPromise=o,t}.bind(this)},r.prototype.write=function(t){if(null!=t){var e="string"==typeof t;e||"function"==typeof t.then||(t=t.toString(),e=!0),e?this.isPromise?(this.output.push(t),this.isPromise=!1,this.offset++):this.output[this.offset]+=t:(this.isPromise=!0,this.offset++,this.output.push(t))}},r.prototype.safe_write=function(t){if(null!=t){var e="string"==typeof t;e||"function"==typeof t.then||(t=t.toString(),e=!0),e?this.isPromise?(this.output.push(r.sanitize(t)),this.isPromise=!1,this.offset++):this.output[this.offset]+=r.sanitize(t):(this.isPromise=!0,this.offset++,this.sanitize.push(this.offset),this.output.push(t))}},r.prototype.toString=function(){var t;if(t=-1==this.offset?"":0==this.offset?this.output[0]:Promise.all(this.output).then(function(t){for(var e=0,s=this.sanitize.length;e<s;e++){var i=this.sanitize[e];t[i]=r.sanitize(null==t[i]?"":t[i])}return t.join("")}.bind(this)),this.hook){if(t.then)return t.then(function(t){return this.hook(t)}.bind(this));t=this.hook(t)}return t};var a=function(t){t||(t={}),this.options={cache:t.hasOwnProperty("cache")?t.cache:a.cache,strict:t.hasOwnProperty("strict")?t.strict:a.strict,profile:t.hasOwnProperty("profile")?t.profile:a.profile,localsName:t.localsName||"locals",delimiter:t.delimiter||a.delimiter,root:t.root||a.root},this._session={}};a.dirname="views",a.root="/",a.cache=!1,a.strict=!1,a.profile=!1,a.sourcemap=!1,a.delimiter="%",a.__cache={},a.__fn={},a.prototype.compile=function(t,e){if(this.options.cache&&a.__cache.hasOwnProperty(t))return a.__cache[t];try{var s=o(t,this.options,e||"eval",this).bind(null,this);return this.options.cache&&(a.__cache[t]=s),s}catch(t){var i=t.lineNumber?t.lineNumber:1,n=new SyntaxError(t.message,e,i);throw n.stack=t.message+"\n    at "+e+":"+i+"\n"+n.stack.split(/\n/g).slice(4).join("\n"),n}},a.compile=function(t,e){return new a(e).compile(t)},a.prototype.prepareContext=function(t){return t},a.prototype.render=function(t,e){var s=this.compile(t)(this.prepareContext(e));return"function"==typeof s.then?s:Promise.resolve(s)},a.prototype.output=function(){return new r},a.render=function(t,e,s){return new a(s).render(t,e)},a.prototype.include=function(t,e,s,i){return"function"==typeof i&&(i={contents:i()}),"string"==typeof i&&(i={contents:i}),this.renderFile(this.resolveInclude(s,e),Object.assign({},t,i||{}))},a.prototype.layout=function(t,e,s,i,n){var o=this;return s.hook=function(s){return(n=Object.assign({},t,n||{})).contents=s,o.renderFile(o.resolveInclude(i,e),n)},null},a.prototype.block=function(t,e,s){if(!e)return null;if(this._session[e]||(this._session[e]=this.output()),3==arguments.length){if("function"==typeof s){var i=this._output.buffer();s(),s=i()}return this._session[e].write(s),this._session[e]}return this._session[e].toString()},a.prototype.resolveInclude=function(t,e,s){return e&&"eval"!=e||(e=Array.isArray(this.options.root)?this.options.root[0]:this.options.root,s=!0),path.isAbsolute(t)&&(t.startsWith(e)&&(t=t.substring(e.length)),t="./"+t.replace(/^\/*/,""),e=Array.isArray(this.options.root)?this.options.root[0]:this.options.root,s=!0),a.resolveInclude(t,e,s,this.options.root)},a.resolveInclude=function(t,e,s,i){if(e&&(s||(e=path.dirname(e)),t=path.resolve(e,t)),path.extname(t)||(t+=".ejs"),!i||!Array.isArray(i))return t;try{return a.selectFirstPathMatch(t,i)}catch(t){throw t}},a.registerFunction=function(t,e){a.__fn[t]=e},a.selectFirstPathMatch=function(t,e){try{const{root:s,siblings:i}=a.relativeSiblings(t,e);t=path.relative(s,t);for(let e of i){const i=path.join(s,e,t);if(fs.existsSync(i))return i}return path.join(s,t)}catch(t){throw t}},a.relativeSiblings=function(t,e){try{const s=a.selectRoot(t,e);if(!s)throw new Error(`File : ${t} doesn't exists`);const i=[];for(let t of e)i.push(path.relative(s,t));return{siblings:i,root:s}}catch(t){throw t}},a.selectRoot=function(t,e){for(let s of e){if(s==t.substring(0,s.length))return s}return!1},a.prototype.renderFile=function(t,e){const s=this,i=new Promise(function(n,o){try{t=s.resolveInclude(t)}catch(t){return o(t)}var r=function(i){const r=function(s,n){const o=s.stack.split("\n");let r=o,h="unknown";if(o[1]&&o[1].split&&"function"==typeof o[1].split&&(h=(r=o[1].split(":"))[0].trim().split(" ")[1]),"eval"==h){r=r[r.length-2]-18,isNaN(r)&&(r=1);const e=r>5?r-5:0,s=function(t,s){t.length>123&&(t=t.substring(0,80)+"..."+t.substring(t.length-40));let i=e+s+1;return i==r?(""+i).padStart(3,"0")+" | "+t+"\n     "+"".padEnd(t.length,"~"):(""+i).padStart(3,"0")+" | "+t};if(n){const t=(n=n.toString()).toString().split("\n").slice(e>18?e-18:e,r+18);console.error(t.map(s).join("\n"))}const h=i.toString().split("\n").slice(e,r+5);console.error(h.map(s).join("\n")),console.error("\n"+o[0]+"\n at "+t+":"+r)}else console.error(s);e._includes&&(e._includes.pop(),e._includes.length>0&&console.error("\nIncludes stack : \n- "+e._includes.join("\n- ")))};var h;try{e._includes||(e._includes=[]),e._includes.push(t);var a=(h=s.compile(i.toString(),t))(s.prepareContext(e));a&&"function"==typeof a.then?a.then(function(t){e._includes.pop(),n(t)}).catch(s.strict?o:function(t){r(t,h),n("\x3c!-- "+t.message+" --\x3e")}):(e._includes.pop(),n(a))}catch(t){if(s.strict)return o(t);r(t,h),n("\x3c!-- "+t.message+" --\x3e")}};if(s.options.profile){const e=(new Date).getTime();nextTick(function(){i.then(function(s){let i=(new Date).getTime()-e;i<1e3?i+="ms":i=Math.round(i/100)/10+"sec";let n=s?s.length:0;return n<2048?n+="B":n=Math.round(n/1024)+"kB",console.log("Rendering "+n+" in "+i+" for "+t),s})})}s.options.cache&&a.__cache.hasOwnProperty(t)?r(a.__cache[t]):fs.readFile(t,function(e,i){if(e)return o(e);s.options.cache&&(a.__cache[t]=i),r(i)})});return i},a.renderFile=function(t,e,s){return new a(s).renderFile(t,e)},a.__express=async function(t,e,s){if(!s||"function"!=typeof s)throw new Error("No response callback");var i={};e.settings&&(e.settings["view cache"]&&(i.cache=!0),e.settings.views&&(i.root=e.settings.views));try{const n=await a.renderFile(t,e,i);"string"==typeof n?s(null,n):s(n,null)}catch(t){s(t,null)}},"undefined"!=typeof window?window.ejs=a:"undefined"!=typeof global&&(global.ejs=a),e&&(e.ejs=a),"function"==typeof define&&define.amd&&define("ejs",a),t&&t.fn&&(t.fn.extend({ejs:function(e,s){var i=t.fn.ejs.options;s&&(i=t.extend(!0,i,s));var n=new n(i);return this.each(function(){var s=t(this).html();n.compile(s)(e).then(function(e){t(this).html(e)}.bind(this)).catch(function(e){t(this).html('<pre class="ejs-error">'+e.toString()+"</pre>")})})}}),t.fn.ejs.options={})}(jQuery,window);