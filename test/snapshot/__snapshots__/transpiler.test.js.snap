// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Transpiler More complex 1`] = `
"if (arguments.length < 2) {
	foo = ejs;
	ejs = (typeof global != "undefined" && global.ejs) || (typeof window != "undefined" && window.ejs);
	if(!ejs) return Promise.reject(new Error("EJS module is not loaded"));
	ejs = new ejs({"strict":false,"localsName":"foo"});
}
foo = foo || {};
var include = ejs.include.bind(ejs, foo, "eval");
var block = ejs.block.bind(ejs, foo);
var _$e = ejs.output();
ejs._output = _$e;
foo._filename = "eval";
foo._include = include;
foo._output = _$e;
var echo = _$e.safe_write.bind(_$e);
var write = _$e.write.bind(_$e);
var layout = ejs.layout.bind(ejs, foo, "eval", _$e);var f1=null,f2=null,f3=null;_$e.write(\`
OK, so have fun! :D
-------------------
\`);
    var fruits = ["Apple", "Pear", "Orange", "Lemon"]
      , random = " ".(( (f1 = foo) && f1 && typeof f1["repeat"] == "function") ? f1["repeat"](198): "") .(( (f2 = foo) && f2 && typeof f2["split"] == "function") ? f2["split"](""): "") .(( (f3 = foo) && f3 && typeof f3["map"] == "function") ? f3["map"]( (foo.x || "") => Math.random ()): "") 
      ;
;_$e.write(\`

These fruits are amazing:
\`); for (var i = 0;  i < fruits.length ; ++i ) { ;_$e.write(\`
  - \`);_$e.safe_write( fruits [i ] );_$e.write(\`s
\`); } ;_$e.write(\`
Let's see some random numbers:

\`); 
  random.forEach (function(c, i) {
;_$e.write(\` \`);_$e.safe_write( c.toFixed (10) + (( i + 1) % 6 === 0 ? "\\n": "") );
  });
;_$e.write(\`

Hello \`);_$e.safe_write(  ((foo.locals || "").name || "") );_$e.write(\` !
    \`);;
return _$e.toString();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2YWwiXSwic291cmNlc0NvbnRlbnQiOiJcbk9LLCBzbyBoYXZlIGZ1biEgOkRcbi0tLS0tLS0tLS0tLS0tLS0tLS1cbjwlXG4gICAgdmFyIGZydWl0cyA9IFtcIkFwcGxlXCIsIFwiUGVhclwiLCBcIk9yYW5nZVwiLCBcIkxlbW9uXCJdXG4gICAgICAsIHJhbmRvbSA9IFwiIFwiLnJlcGVhdCgxOTgpLnNwbGl0KFwiXCIpLm1hcCh4ID0+IE1hdGgucmFuZG9tKCkpXG4gICAgICA7XG4lPlxuXG5UaGVzZSBmcnVpdHMgYXJlIGFtYXppbmc6XG48JV8gZm9yKHZhciBpID0gMDsgaSA8IGZydWl0cy5sZW5ndGg7ICsraSkgeyBfJT5cblxuICAtIDwlPSBmcnVpdHNbaV0gJT5zXG48JV8gfSBfJT5cblxuTGV0J3Mgc2VlIHNvbWUgcmFuZG9tIG51bWJlcnM6XG5cbjwlIFxuICByYW5kb20uZm9yRWFjaChmdW5jdGlvbihjLCBpKSB7XG4lPiA8JT0gYy50b0ZpeGVkKDEwKSArICgoaSArIDEpICUgNiA9PT0gMCA/IFwiXFxuXCI6IFwiXCIpICU+PCVcbiAgfSk7XG4lPlxuXG5IZWxsbyA8JT0gbG9jYWxzLm5hbWUgJT4gIVxuICAgIG51bGxudWxsbnVsbCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0EsZ0ZBQUE7QUFDQTtBQUNBO0FBQ0EsR0FIQTtBQUNBLElBREEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxPQUFBLENBQUE7QUFDQSxNQURBLENBQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSx5RUFBQSxHQUFBLE9BQUEsQ0FBQSx1RUFBQSxFQUFBLE9BQUEsQ0FBQSxtRUFBQSxDQUFBLGVBQUEsQ0FBQSxDQUFBLGFBQUEsQ0FBQSxPQUFBO0FBQ0EsTUFEQSxDQUFBO0FBQUEsQ0FBQTtBQUNBO0FBQ0E7QUFDQSxHQUhBLENBQUEsS0FBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLEdBQUEsQ0FBQSxlQUFBLENBQUEsRUFBQSxHQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxzQkFEQSxDQUFBLFFBQUEsR0FBQSxDQUFBLEVBQUE7QUFDQSxHQURBLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQTtBQUNBO0FBQ0EsR0FIQTtBQUNBLEVBREEsZ0JBQUEsUUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7QUFBQSxDQUFBLDhCQUFBLENBQUEsV0FBQSxFQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsR0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLElBQUEsQ0FBQSxDQUFBLEVBQUEsQ0FBQSxDQUFBLEVBQUE7QUFDQSxFQURBLENBQUEsQ0FBQSxDQUFBO0FBQUEsQ0FBQTtBQUNBO0FBQ0Esd0JBRkEsQ0FBQSxDQUFBLGtDQUFBO0FBQ0EsT0FEQSxDQUFBO0FBQ0E7In0="
`;

exports[`Transpiler Simple case / strict mode 1`] = `
""use strict";if (arguments.length < 2) {
	fooBar = ejs;
	ejs = (typeof global != "undefined" && global.ejs) || (typeof window != "undefined" && window.ejs);
	if(!ejs) return Promise.reject(new Error("EJS module is not loaded"));
	ejs = new ejs({"strict":true,"localsName":"fooBar"});
}
fooBar = fooBar || {};
var include = ejs.include.bind(ejs, fooBar, "eval");
var block = ejs.block.bind(ejs, fooBar);
var _$e = ejs.output();
ejs._output = _$e;
fooBar._filename = "eval";
fooBar._include = include;
fooBar._output = _$e;
var echo = _$e.safe_write.bind(_$e);
var write = _$e.write.bind(_$e);
var layout = ejs.layout.bind(ejs, fooBar, "eval", _$e);_$e.write(\`
    <foo> <%%
    \`);/* <%# comment %> */_$e.write(\`
\`);  if ( fooBar.foo == "%>\\"%>") { ;_$e.write(\`      \`);_$e.safe_write(  fooBar.bar );_$e.write(\`
    \`); } ;_$e.write(\`
    </foo>
    \`);
return _$e.toString();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2YWwiXSwic291cmNlc0NvbnRlbnQiOiJcbiAgICA8Zm9vPiA8JSVcbiAgICA8JSMgY29tbWVudCAlPlxuICAgIDwlXyBpZiAoZm9vID09IFwiJT5cXFwiJT5cIikgeyBfJT5cbiAgICAgIDwlPSBiYXIgJT5cbiAgICA8JSB9ICU+XG4gICAgPC9mb28+XG4gICAgbnVsbCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0EsdURBQUE7QUFDQTtBQUNBLDJCQUZBO0FBQ0EsR0FEQSxDQUFBLENBQUEsSUFBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLG1DQUFBLENBQUEsQ0FBQSxhQUFBO0FBQ0EsT0FEQSxDQUFBLENBQUEsQ0FBQSxDQUFBO0FBQ0E7QUFDQTs7In0="
`;

exports[`Transpiler Simple case 1`] = `
"if (arguments.length < 2) {
	foo = ejs;
	ejs = (typeof global != "undefined" && global.ejs) || (typeof window != "undefined" && window.ejs);
	if(!ejs) return Promise.reject(new Error("EJS module is not loaded"));
	ejs = new ejs({"strict":false,"localsName":"foo"});
}
foo = foo || {};
var include = ejs.include.bind(ejs, foo, "eval");
var block = ejs.block.bind(ejs, foo);
var _$e = ejs.output();
ejs._output = _$e;
foo._filename = "eval";
foo._include = include;
foo._output = _$e;
var echo = _$e.safe_write.bind(_$e);
var write = _$e.write.bind(_$e);
var layout = ejs.layout.bind(ejs, foo, "eval", _$e);_$e.write(\`
    <foo> <%%
    \`);/* <%# comment %> */_$e.write(\`
\`);  if ( foo == "%>\\"%>") { ;_$e.write(\`      \`);_$e.safe_write(  (foo.bar || "") );_$e.write(\`
    \`); } ;_$e.write(\`
    </foo>
    \`);
return _$e.toString();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2YWwiXSwic291cmNlc0NvbnRlbnQiOiJcbiAgICA8Zm9vPiA8JSVcbiAgICA8JSMgY29tbWVudCAlPlxuICAgIDwlXyBpZiAoZm9vID09IFwiJT5cXFwiJT5cIikgeyBfJT5cbiAgICAgIDwlPSBiYXIgJT5cbiAgICA8JSB9ICU+XG4gICAgPC9mb28+XG4gICAgbnVsbCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0Esb0RBQUE7QUFDQTtBQUNBLDJCQUZBO0FBQ0EsR0FEQSxDQUFBLENBQUEsSUFBQSxDQUFBLEtBQUEsQ0FBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLG1DQUFBLENBQUEsQ0FBQSxrQkFBQTtBQUNBLE9BREEsQ0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBO0FBQ0E7OyJ9"
`;

exports[`Transpiler Simple case 2`] = `
"if (arguments.length < 2) {
	locals = ejs;
	ejs = (typeof global != "undefined" && global.ejs) || (typeof window != "undefined" && window.ejs);
	if(!ejs) return Promise.reject(new Error("EJS module is not loaded"));
	ejs = new ejs({"localsName":"locals"});
}
locals = locals || {};
var include = ejs.include.bind(ejs, locals, "eval");
var block = ejs.block.bind(ejs, locals);
var _$e = ejs.output();
ejs._output = _$e;
locals._filename = "eval";
locals._include = include;
locals._output = _$e;
var echo = _$e.safe_write.bind(_$e);
var write = _$e.write.bind(_$e);
var layout = ejs.layout.bind(ejs, locals, "eval", _$e);_$e.write(\`
    Before Include
    \`);_$e.write( include ((locals.foo || "") , function() { var _$e = ejs.output(); var echo = _$e.safe_write.bind(_$e); var write = _$e.write.bind(_$e);  ;_$e.write(\`
      Header of Inner Block
      \`);_$e.write( include ((locals.bar || "") , function() { var _$e = ejs.output(); var echo = _$e.safe_write.bind(_$e); var write = _$e.write.bind(_$e);  ;_$e.write(\`
      Footer of Inner Block
      \`); return _$e.toString(); }) );_$e.write(\`  
    \`); return _$e.toString(); }) );_$e.write(\`
    After Include
    \`);
return _$e.toString();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2YWwiXSwic291cmNlc0NvbnRlbnQiOiJcbiAgICBCZWZvcmUgSW5jbHVkZVxuICAgIDwlLSBpbmNsdWRlKGZvbywgZnVuY3Rpb24oKSB7QCAlPlxuICAgICAgSGVhZGVyIG9mIElubmVyIEJsb2NrXG4gICAgICA8JS0gaW5jbHVkZShiYXIsIGZ1bmN0aW9uKCkge0AgJT5cbiAgICAgIEZvb3RlciBvZiBJbm5lciBCbG9ja1xuICAgICAgPCUgQH0pICU+ICBcbiAgICA8JSBAfSkgJT5cbiAgICBBZnRlciBJbmNsdWRlXG4gICAgbnVsbCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0EsdURBQUE7QUFDQTtBQUNBLGlCQUZBLENBQUEsU0FBQSxvQkFBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLENBQUEsZ0dBQUEsQ0FBQSxDQUFBO0FBQ0E7QUFDQSxtQkFGQSxDQUFBLFNBQUEsb0JBQUEsQ0FBQSxRQUFBLENBQUEsQ0FBQSxDQUFBLGdHQUFBLENBQUEsQ0FBQTtBQUNBO0FBQ0EsU0FGQSxDQUFBLHdCQUFBLENBQUEsQ0FBQSxFQUFBO0FBQ0EsT0FEQSxDQUFBLHdCQUFBLENBQUEsQ0FBQSxFQUFBO0FBQ0E7QUFDQTs7In0="
`;

exports[`Transpiler Template with redirected output 1`] = `
""use strict";if (arguments.length < 2) {
	_ = ejs;
	ejs = (typeof global != "undefined" && global.ejs) || (typeof window != "undefined" && window.ejs);
	if(!ejs) return Promise.reject(new Error("EJS module is not loaded"));
	ejs = new ejs({"strict":true,"localsName":"_"});
}
_ = _ || {};
var include = ejs.include.bind(ejs, _, "eval");
var block = ejs.block.bind(ejs, _);
var _$e = ejs.output();
ejs._output = _$e;
_._filename = "eval";
_._include = include;
_._output = _$e;
var echo = _$e.safe_write.bind(_$e);
var write = _$e.write.bind(_$e);
var layout = ejs.layout.bind(ejs, _, "eval", _$e);_$e.write(\`
      \`);_$e.write( include ('foo', {
          contents : function() { var _$e = ejs.output(); var echo = _$e.safe_write.bind(_$e); var write = _$e.write.bind(_$e);  ;_$e.write(\`
            Hello world
          \`); return _$e.toString(); }
        })
      );_$e.write(\`
    \`);
return _$e.toString();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV2YWwiXSwic291cmNlc0NvbnRlbnQiOiJcbiAgICAgIDwlLSBpbmNsdWRlKCdmb28nLCB7XG4gICAgICAgICAgY29udGVudHM6IGZ1bmN0aW9uKCkge0AgJT5cbiAgICAgICAgICAgIEhlbGxvIHdvcmxkXG4gICAgICAgICAgPCUgQH1cbiAgICAgICAgfSlcbiAgICAgICU+XG4gICAgbnVsbCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0Esa0RBQUE7QUFDQSxtQkFEQSxDQUFBLFNBQUEsS0FBQSxDQUFBLENBQUEsQ0FBQTtBQUNBLFVBREEsVUFBQSxDQUFBLFFBQUEsQ0FBQSxDQUFBLENBQUEsZ0dBQUEsQ0FBQSxDQUFBO0FBQ0E7QUFDQSxhQUZBLENBQUEsd0JBQUE7QUFDQSxRQURBLENBQUEsQ0FBQTtBQUNBLE1BREEsRUFBQTtBQUNBOzsifQ=="
`;
